(function(){"use strict";var e={5284:function(e,t,a){var s=a(5130),o=a(6768);function n(e,t,a,s,n,i){const c=(0,o.g2)("SideBar"),r=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[i.isLoginOrSignupPage?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(c,{key:0})),(0,o.bF)(r)],64)}var i=a(4232);const c=e=>((0,o.Qi)("data-v-2df62ab5"),e=e(),(0,o.jt)(),e),r={key:0,class:"user-info"},l={class:"avatar"},d={key:1,class:"user-info"},u={class:"avatar"},h=c((()=>(0,o.Lk)("i",{class:"bx bx-log-out"},null,-1))),p={key:0};function m(e,t,a,s,n,c){const m=(0,o.g2)("router-link"),g=(0,o.g2)("SideBarLink");return(0,o.uX)(),(0,o.CE)("div",{class:"sidebar",style:(0,i.Tr)({width:s.sidebarWidth})},[(0,o.Lk)("div",{class:"sidebar-header",style:(0,i.Tr)({height:c.computedHeight+"px"})},[s.collapsed?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",l,[(0,o.Lk)("span",null,(0,i.v_)(c.renderAvt),1)])])):((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("span",null,(0,i.v_)(c.renderAvt),1)]),(0,o.bF)(m,{class:"email",to:"/user"},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(this.email),1)])),_:1}),(0,o.Lk)("p",null,(0,i.v_)(this.userName),1)]))],4),(0,o.bF)(g,{to:"/",icon:"bx bx-home"},{default:(0,o.k6)((()=>[(0,o.eW)("Home")])),_:1}),(0,o.bF)(g,{to:"/contact",icon:"bx bxs-contact"},{default:(0,o.k6)((()=>[(0,o.eW)("Contact")])),_:1}),(0,o.bF)(g,{to:"/stringee-demo",icon:"bx bxs-castle"},{default:(0,o.k6)((()=>[(0,o.eW)("Stringee")])),_:1}),(0,o.Lk)("div",{class:"logout-area",onClick:t[0]||(t[0]=(...e)=>c.logout&&c.logout(...e))},[h,s.collapsed?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",p,"Logout"))]),(0,o.Lk)("span",{class:"collapse-icon",onClick:t[1]||(t[1]=(...e)=>s.toggleSidebar&&s.toggleSidebar(...e))},[(0,o.Lk)("i",{class:(0,i.C4)(s.collapsed?"bx bx-chevrons-right":"bx bx-chevrons-left")},null,2)])],4)}a(4114);var g=a(144);const b=(0,g.KR)(!1),k=()=>b.value=!b.value,w=180,v=60,L=(0,o.EW)((()=>`${b.value?v:w}px`)),f={key:0};function C(e,t,a,n,c,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.Wv)(l,{to:a.to,class:(0,i.C4)(["sidebar-link",{active:n.isActive}])},{default:(0,o.k6)((()=>[(0,o.Lk)("i",{class:(0,i.C4)(["sidebar-icon",a.icon])},null,2),(0,o.bF)(s.eB,null,{default:(0,o.k6)((()=>[n.collapsed?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",f,[(0,o.RG)(e.$slots,"default",{},void 0,!0)]))])),_:3})])),_:3},8,["to","class"])}var y=a(1387),P={props:{to:{type:String,required:!0},icon:{type:String,required:!0}},setup(e){const t=(0,y.lq)(),a=(0,o.EW)((()=>t.path===e.to));return{isActive:a,collapsed:b}}},x=a(1241);const S=(0,x.A)(P,[["render",C],["__scopeId","data-v-34e8be52"]]);var A=S,E=a(8355),_=a(5068),V="";const T=E.A.create({baseURL:"http://localhost:10000/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});T.interceptors.request.use((async e=>{if(V=localStorage.getItem("accessToken"),V){const t=(0,_.s)(V),a=Math.floor(Date.now()/1e3);if(t.exp<=a){console.log("Token is expired, request new token...");const t=localStorage.getItem("refreshToken"),a=await E.A.post("http://localhost:10000/api/user/refresh-token",{refreshToken:t});return localStorage.setItem("accessToken",a.data.accessToken),e.headers["ndk-auth"]=a.data.accessToken,e}return e.headers["ndk-auth"]=V,e}return e}),(async e=>{throw e})),T.interceptors.response.use((e=>e&&e.data?e.data:e),(e=>{if(e&&e.response&&e.response.data&&e.response.data.error)throw e.response.data.error;throw e}));var I=T;const D={register:e=>{const t="/user/register";return I.post(t,e)},login:e=>{const t="/user/login";return I.post(t,e)},logout:e=>{const t="/user/logout";return I.post(t,e)},sendOTP:e=>{const t="/user/send-otp";return I.post(t,{email:e})},recoverPassword:e=>{const t="/user/recover-password";return I.post(t,e)}};var N=D;const O={createContact:e=>{const t="/contact/create";return I.post(t,e)},updateContact:(e,t)=>{const a="/contact/"+e;return I.put(a,t)},getContactByPhoneNumber:e=>{const t="/contact?phone_number="+e;return I.get(t)},getContact:e=>{const t="/contact/"+e;return I.get(t)},getList:e=>{e=e||"";const t="/contact"+e;return I.get(t)},deleteContact:e=>{const t="/contact/delete/"+e;return I.delete(t)}};var M=O;const U={getPccClientOken:e=>{const t="/stringee/agent/pcc-client-token/"+e;return I.get(t)},getNumberList:()=>{const e="/stringee/number";return I.get(e)},updateAgent:(e,t)=>{const a="/stringee/agent/update/"+e;return I.post(a,t)},getAgent:e=>{const t="/stringee/agent/"+e;return I.get(t)}};var R=U,F={components:{SideBarLink:A},setup(){return{collapsed:b,toggleSidebar:k,sidebarWidth:L,userName:"",email:"",isAuthenticated:!1}},created(){if(this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated){const e=JSON.parse(localStorage.getItem("userData"));this.email=e.email,this.userName=e.name}},computed:{renderAvt(){return this.userName.split(" ").map((e=>e.charAt(0))).join("").toUpperCase()},computedHeight(){return this.collapsed?70:120}},methods:{async logout(){try{const e=localStorage.getItem("refreshToken"),t=await N.logout({refreshToken:e});t&&(localStorage.clear(),this.$router.push({name:"LoginPage"}))}catch(e){console.log(e),localStorage.clear(),this.$router.push({name:"LoginPage"})}}}};const $=(0,x.A)(F,[["render",m],["__scopeId","data-v-2df62ab5"]]);var X=$,B={name:"App",components:{SideBar:X},computed:{isLoginOrSignupPage(){return"LoginPage"===this.$route.name||"SignupPage"===this.$route.name||"RecoverPasswordPage"===this.$route.name||"NotFoundPage"===this.$route.name||"StringeeIframe"===this.$route.name}}};const W=(0,x.A)(B,[["render",n]]);var G=W;const J={class:"authen-page"},j={class:"wrapper"},q=(0,o.Lk)("h1",null,"LOGIN",-1),H={class:"input-box"},Q=(0,o.Lk)("i",{class:"bx bx-envelope"},null,-1),z={class:"input-box"},K=["type"],Y={class:"forgot-password"},Z=(0,o.Lk)("button",{type:"submit"},"Login",-1),ee={class:"login-signup-link"};function te(e,t,a,n,c,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",J,[(0,o.Lk)("div",j,[(0,o.Lk)("form",{class:"form-box",onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[q,(0,o.Lk)("div",H,[(0,o.bo)((0,o.Lk)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>c.inputEmail=e),autocomplete:"email",required:""},null,512),[[s.Jo,c.inputEmail]]),Q]),(0,o.Lk)("div",z,[(0,o.bo)((0,o.Lk)("input",{type:c.showPassword?"text":"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>c.inputPassword=e),autocomplete:"current-password",required:""},null,8,K),[[s.hp,c.inputPassword]]),(0,o.Lk)("i",{class:(0,i.C4)(c.showPassword?"bx bx-show":"bx bx-hide"),onClick:t[2]||(t[2]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e))},null,2)]),(0,o.Lk)("div",Y,[(0,o.bF)(l,{to:"/recover-password"},{default:(0,o.k6)((()=>[(0,o.eW)("Forgot password")])),_:1})]),Z,(0,o.Lk)("div",ee,[(0,o.Lk)("p",null,[(0,o.eW)("Don't have an account?"),(0,o.bF)(l,{to:"/signup"},{default:(0,o.k6)((()=>[(0,o.eW)("Sign up")])),_:1})])])],32)])])}const ae={position:"top-center",timeout:1500,closeOnClick:!0,pauseOnFocusLoss:!1,pauseOnHover:!1,draggable:!0,draggablePercent:1,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:!1,icon:!0,rtl:!1},se={MISS_MATCH_PASSWORD:"Password and confirm password are not match",NOT_FOUND_STRINGEE_SOFTPHONE:"Stringee softphone is not found",SELECT_NUMBER:"Please select number from softphone first",MISSING_EMAIL:"Please enter your email",MISSING_NEW_PASSWORD:"Please enter your new password"},oe={SIGN_UP:"Sign up successfully",CREATE_CONTACT:"Create contact successfully",UPDATE_CONTACT:"Update contact successfully",DELETE_CONTACT:"Delete contact successfully",SEND_OTP:"Send OTP successfully, please check your phone",RECOVER_PASSWORD:"Recover password successfully"};var ne=a(7411),ie={name:"LoginPage",setup(){const e=(0,ne.dj)();return{toast:e}},data(){return{inputEmail:"",inputPassword:"",isAuthenticated:!1,showPassword:!1}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated&&this.$router.push({name:"HomePage"})},methods:{async login(){try{if(this.isValid()){const e={email:this.inputEmail,password:this.inputPassword},t=await N.login(e);if(t){const e=JSON.stringify(t.user);localStorage.setItem("isAuthenticated",!0),localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),localStorage.setItem("userData",e),this.$router.push({name:"HomePage"})}}}catch(e){this.toast.error(e.message,ae)}},isValid(){return""!==this.inputEmail&&""!==this.inputPassword},togglePasswordVisibility(){this.showPassword=!this.showPassword}},watch:{inputPassword(e){this.inputPassword=e.replace(/\s/g,"")}}};const ce=(0,x.A)(ie,[["render",te]]);var re=ce;const le={class:"authen-page"},de={class:"form-box"},ue=(0,o.Lk)("h1",null,"SIGN UP",-1),he={class:"input-box"},pe=(0,o.Lk)("i",{class:"bx bx-user"},null,-1),me={class:"input-box"},ge=(0,o.Lk)("i",{class:"bx bx-envelope"},null,-1),be={class:"input-box"},ke=(0,o.Lk)("i",{class:"bx bx-phone"},null,-1),we={class:"input-box"},ve=["type"],Le={class:"input-box"},fe=["type"],Ce={class:"agree-condition"},ye={key:0,type:"submit"},Pe={class:"login-signup-link"};function xe(e,t,a,n,c,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",le,[(0,o.Lk)("div",{class:"wrapper signup-page",onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>r.signup&&r.signup(...e)),["prevent"]))},[(0,o.Lk)("form",de,[ue,(0,o.Lk)("div",he,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"User name","onUpdate:modelValue":t[0]||(t[0]=e=>c.inputUserName=e),required:""},null,512),[[s.Jo,c.inputUserName]]),pe]),(0,o.Lk)("div",me,[(0,o.bo)((0,o.Lk)("input",{type:"email",placeholder:"Email",autocomplete:"email","onUpdate:modelValue":t[1]||(t[1]=e=>c.inputEmail=e),required:""},null,512),[[s.Jo,c.inputEmail]]),ge]),(0,o.Lk)("div",be,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"Phone number",autocomplete:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>c.inputPhoneNumber=e),required:""},null,512),[[s.Jo,c.inputPhoneNumber]]),ke]),(0,o.Lk)("div",we,[(0,o.bo)((0,o.Lk)("input",{type:c.showPassword?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>c.inputPassword=e),placeholder:"Password",autocomplete:"current-password",required:""},null,8,ve),[[s.hp,c.inputPassword]]),(0,o.Lk)("i",{class:(0,i.C4)(c.showPassword?"bx bx-show":"bx bx-hide"),onClick:t[4]||(t[4]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e))},null,2)]),(0,o.Lk)("div",Le,[(0,o.bo)((0,o.Lk)("input",{type:c.showConfirmPassword?"text":"password","onUpdate:modelValue":t[5]||(t[5]=e=>c.inputConfirmPassword=e),placeholder:"Confirm password",autocomplete:"current-password",required:""},null,8,fe),[[s.hp,c.inputConfirmPassword]]),(0,o.Lk)("i",{class:(0,i.C4)(c.showConfirmPassword?"bx bx-show":"bx bx-hide"),onClick:t[6]||(t[6]=(...e)=>r.toggleConfirmPasswordVisibility&&r.toggleConfirmPasswordVisibility(...e))},null,2)]),(0,o.Lk)("div",Ce,[(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>c.isAgree=e)},null,512),[[s.lH,c.isAgree]]),(0,o.eW)(" I agree to the terms & conditions")])]),c.isAgree?((0,o.uX)(),(0,o.CE)("button",ye,"Sign up")):(0,o.Q3)("",!0),(0,o.Lk)("div",Pe,[(0,o.Lk)("p",null,[(0,o.eW)("Already have an account?"),(0,o.bF)(l,{to:"/login"},{default:(0,o.k6)((()=>[(0,o.eW)("Login")])),_:1})])])])],32)])}var Se={name:"LoginPage",setup(){const e=(0,ne.dj)();return{toast:e}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated&&this.$router.push({name:"HomePage"})},data(){return{inputUserName:"",inputEmail:"",inputPhoneNumber:"",inputPassword:"",inputConfirmPassword:"",showPassword:!1,showConfirmPassword:!1,isHide:!0,isAgree:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword},async signup(){try{if(this.isValid()){const e={name:this.inputUserName,email:this.inputEmail,phone_number:this.inputPhoneNumber,password:this.inputPassword},t=await N.register(e);t&&(this.toast.success(oe.SIGN_UP,ae),this.$router.push({name:"LoginPage"}))}}catch(e){this.toast.error(e.message,ae)}},isValid(){return!!(this.inputUserName||this.inputEmail||this.inputPassword||this.inputConfirmPassword||this.isAgree)&&(this.inputPassword===this.inputConfirmPassword||(this.toast.error(se.MISS_MATCH_PASSWORD,ae),!1))}},watch:{inputPhoneNumber(e){this.inputPhoneNumber=e.replace(/\D/g,"")},inputPassword(e){this.inputPassword=e.replace(/\s/g,"")},inputConfirmPassword(e){this.inputConfirmPassword=e.replace(/\s/g,"")}}};const Ae=(0,x.A)(Se,[["render",xe]]);var Ee=Ae;const _e={class:"authen-page"},Ve={class:"wrapper recover-password-page"},Te=(0,o.Lk)("h1",null,"RECOVER PASSWORD",-1),Ie={class:"input-box"},De=(0,o.Lk)("i",{class:"bx bx-envelope"},null,-1),Ne={class:"input-box"},Oe=["type"],Me={class:"otp-area"},Ue={class:"input-box otp-box"},Re={key:1,class:"counter-otp"},Fe=(0,o.Lk)("button",{type:"submit"},"Recover password",-1),$e={class:"login-signup-link"};function Xe(e,t,a,n,c,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",_e,[(0,o.Lk)("div",Ve,[(0,o.Lk)("form",{class:"form-box",onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>r.recoverPassword&&r.recoverPassword(...e)),["prevent"]))},[Te,(0,o.Lk)("div",Ie,[(0,o.bo)((0,o.Lk)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>c.inputEmail=e),autocomplete:"email",required:""},null,512),[[s.Jo,c.inputEmail]]),De]),(0,o.Lk)("div",Ne,[(0,o.bo)((0,o.Lk)("input",{type:c.showPassword?"text":"password",placeholder:"New password","onUpdate:modelValue":t[1]||(t[1]=e=>c.inputNewPassword=e),autocomplete:"current-password",required:""},null,8,Oe),[[s.hp,c.inputNewPassword]]),(0,o.Lk)("i",{class:(0,i.C4)(c.showPassword?"bx bx-show":"bx bx-hide"),onClick:t[2]||(t[2]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e))},null,2)]),(0,o.Lk)("div",Me,[(0,o.Lk)("div",Ue,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"OTP","onUpdate:modelValue":t[3]||(t[3]=e=>c.inputOTP=e),maxlength:"5",required:""},null,512),[[s.Jo,c.inputOTP]])]),c.showResendOTP?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:"send-otp-btn",onClick:t[4]||(t[4]=(...e)=>r.sendOTP&&r.sendOTP(...e))},"Send OTP")),c.showResendOTP?((0,o.uX)(),(0,o.CE)("div",Re,[(0,o.Lk)("p",null,"Resend OTP in "+(0,i.v_)(c.timer)+"s",1)])):(0,o.Q3)("",!0)]),Fe,(0,o.Lk)("div",$e,[(0,o.Lk)("p",null,[(0,o.eW)("Already have an account?"),(0,o.bF)(l,{to:"/login"},{default:(0,o.k6)((()=>[(0,o.eW)("Login")])),_:1})])])],32)])])}var Be={name:"RecoverPasswordPage",setup(){const e=(0,ne.dj)();return{toast:e}},data(){return{isAuthenticated:!1,showPassword:!1,inputNewPassword:"",inputEmail:"",inputOTP:"",showResendOTP:!1,timer:45,countdownInterval:null}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated&&this.$router.push({name:"HomePage"})},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async sendOTP(){try{if(""===this.inputEmail)return this.toast.warning(se.MISSING_EMAIL,ae);this.showResendOTP=!0,this.timer=45,this.countdownInterval&&clearInterval(this.countdownInterval),this.countdownInterval=setInterval((()=>{this.timer>0?this.timer--:(this.showResendOTP=!1,clearInterval(this.countdownInterval))}),1e3);const e=await N.sendOTP(this.inputEmail);e&&this.toast.success(oe.SEND_OTP,ae)}catch(e){clearInterval(this.countdownInterval),this.showResendOTP=!1,this.toast.error(e.message,ae)}},async recoverPassword(){try{const e={email:this.inputEmail,newPassword:this.inputNewPassword,otp:this.inputOTP},t=await N.recoverPassword(e);t&&(this.toast.success(oe.RECOVER_PASSWORD,ae),this.$router.push({name:"LoginPage"}))}catch(e){this.toast.error(e.message,ae)}}},beforeUnmount(){this.countdownInterval&&clearInterval(this.countdownInterval)},watch:{inputNewPassword(e){this.inputNewPassword=e.replace(/\s/g,"")},inputOTP(e){this.inputOTP=e.replace(/[^0-9]/g,"")}}};const We=(0,x.A)(Be,[["render",Xe]]);var Ge=We;const Je={class:"background"},je=(0,o.Lk)("div",{class:"stage"},[(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"}),(0,o.Lk)("div",{class:"layer"})],-1);function qe(e,t,a,s,n,i){const c=(0,o.g2)("LayoutComponent");return(0,o.uX)(),(0,o.CE)("div",Je,[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[je])),_:1})])}const He=(0,o.Lk)("i",{class:"bx bx-phone"},null,-1),Qe=[He],ze={class:"body"};var Ke={__name:"LayoutComponent",setup(e){let t,a,s;const n=JSON.parse(localStorage.getItem("userData")),c={appendToElement:"softPhoneBtn",showMode:"none",top:53,arrowLeft:137,arrowDisplay:"top",makeAndReceiveCallInNewPopupWindow:!1,lang:"en",fromNumbers:[]},r=()=>{"full"===t.showMode?t.config({showMode:"none"}):t.config({showMode:"full"})};function l(){t.on("authen",(async e=>{try{console.log("Authen: ",e);const o=await R.getNumberList();if(!(o.data.numbers.length>0))throw console.error("Please setup a number in https://pcc.stringee.com/setting/number");a=[],o.data.numbers.forEach((e=>{let t={number:e.number,alias:e.nickname};a.push(t)}));const n=await R.getAgent(s);await t.config({fromNumbers:a,routingType:n.data.routing_type})}catch(o){return console.error(o)}})),t.on("requestNewToken",(async()=>{await t.disconnect();const e=await R.getPccClientOken(n.stringee_userid);await t.connect(e)})),t.on("addlocalstream",(function(e){console.log("Add local stream:",e)})),t.on("mediastate",(function(e){console.log("Media state:",e)})),t.on("displayModeChange",(e=>{switch(e){case"full":t.config({arrowLeft:136});break;case"min":t.config({arrowLeft:95});break;default:break}})),t.on("setRoutingType",(async e=>{try{const t=await R.updateAgent(s,{routing_type:e});console.log("Update routing type:",t)}catch(t){console.error(t)}})),t.on("setAutoPickCall false",(()=>{console.log("Auto pick call: false")})),t.on("setAutoPickCall true",(()=>{console.log("Auto pick call: true")})),t.on("activityBtnClicked",(()=>{console.log("Activity button clicked")})),t.on("messageFromTopic",(e=>{console.log(e)})),t.on("messagefromtopic",(()=>{})),t.on("disconnect",(()=>{console.log("Disconnected")}))}return(0,o.sV)((async()=>{try{if(!window.StringeeSoftPhone)throw"StringeeSoftPhone is not loaded";if(t=window.StringeeSoftPhone,t.init(c),l(),!n.stringee_userid)throw"Stringee userId is not configured for "+n.email;if(s=n.stringee_userid,!t.connected){const e=await R.getPccClientOken(n.stringee_userid);await t.connect(e)}}catch(e){console.error(e)}})),(e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"layout",style:(0,i.Tr)({marginLeft:(0,g.R1)(L),width:100%-(0,g.R1)(L)})},[(0,o.Lk)("div",{class:"header"},[(0,o.Lk)("div",{class:"softphone-btn",onClick:r,id:"softPhoneBtn"},Qe)]),(0,o.Lk)("div",ze,[(0,o.RG)(e.$slots,"default")])],4))}};const Ye=Ke;var Ze=Ye,et={name:"HomePage",components:{LayoutComponent:Ze},data(){return{isAuthenticated:!1}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated||this.$router.push({name:"LoginPage"})}};const tt=(0,x.A)(et,[["render",qe]]);var at=tt;const st={class:"background"},ot={class:"filter-search-contact-area"},nt={class:"search-contact-area"},it=(0,o.Lk)("i",{class:"bx bx-plus-medical"},null,-1),ct=(0,o.Lk)("p",null,"Add contact",-1),rt=[it,ct],lt=(0,o.Lk)("p",null,"Search by",-1),dt=(0,o.Lk)("option",{value:"phone"},"Phone",-1),ut=(0,o.Lk)("option",{value:"email"},"Email",-1),ht=(0,o.Lk)("option",{value:"gender"},"Gender",-1),pt=(0,o.Lk)("option",{value:"vip"},"VIP",-1),mt=[dt,ut,ht,pt],gt=(0,o.Lk)("option",{value:"male"},"Male",-1),bt=(0,o.Lk)("option",{value:"female"},"Female",-1),kt=[gt,bt],wt=(0,o.Lk)("option",{value:"true"},"True",-1),vt=(0,o.Lk)("option",{value:"false"},"False",-1),Lt=[wt,vt],ft=(0,o.Lk)("i",{class:"bx bx-search"},null,-1),Ct=(0,o.Lk)("p",null,"Search",-1),yt=[ft,Ct],Pt=(0,o.Lk)("div",{class:"filter-contact-area"},null,-1);function xt(e,t,a,n,i,c){const r=(0,o.g2)("ContactDataTable"),l=(0,o.g2)("LayoutComponent");return(0,o.uX)(),(0,o.CE)("div",st,[(0,o.bF)(l,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",ot,[(0,o.Lk)("div",nt,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>c.addContact&&c.addContact(...e))},rt),lt,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.searchBy=e),class:"search-option",onChange:t[2]||(t[2]=(...e)=>c.showSearchInput&&c.showSearchInput(...e))},mt,544),[[s.u1,i.searchBy]]),i.showSearchInputField?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,type:"text",class:"search-input","onUpdate:modelValue":t[3]||(t[3]=e=>i.searchInputValue=e)},null,512)),[[s.Jo,i.searchInputValue]]):(0,o.Q3)("",!0),i.showSearchGenderField?(0,o.bo)(((0,o.uX)(),(0,o.CE)("select",{key:1,"onUpdate:modelValue":t[4]||(t[4]=e=>i.searchGenderValue=e),class:"search-option"},kt,512)),[[s.u1,i.searchGenderValue]]):(0,o.Q3)("",!0),i.showSearchVipField?(0,o.bo)(((0,o.uX)(),(0,o.CE)("select",{key:2,"onUpdate:modelValue":t[5]||(t[5]=e=>i.searchVipValue=e),class:"search-option"},Lt,512)),[[s.u1,i.searchVipValue]]):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>c.searchContact&&c.searchContact(...e)),class:"search-btn"},yt)]),Pt]),(0,o.bF)(r,{titles:i.dataTableTitles,data:i.dataTableContact,class:"contact-page"},null,8,["titles","data"])])),_:1})])}const St={class:"data-table"},At={class:"table-title"},Et={class:"table-name-link"},_t={class:"table-gender"},Vt={class:"table-vip"},Tt={class:"table-action"},It=["onClick"],Dt=(0,o.Lk)("i",{class:"bx bxs-x-circle"},null,-1),Nt=[Dt],Ot=["onClick"],Mt=(0,o.Lk)("i",{class:"bx bx-show"},null,-1),Ut=[Mt],Rt=["onClick"],Ft=(0,o.Lk)("i",{class:"bx bxs-phone"},null,-1),$t=[Ft];function Xt(e,t,a,s,n,c){const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",St,[(0,o.Lk)("table",null,[(0,o.Lk)("tr",At,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.titles,(e=>((0,o.uX)(),(0,o.CE)("th",{key:e},(0,i.v_)(e),1)))),128))]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.filterData,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e._id},[(0,o.Lk)("td",Et,[(0,o.bF)(r,{to:{name:"ContactDetailPage",params:{contactId:e._id}}},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.name),1)])),_:2},1032,["to"])]),(0,o.Lk)("td",null,(0,i.v_)(e.email),1),(0,o.Lk)("td",null,(0,i.v_)(e.phone_number),1),(0,o.Lk)("td",_t,[(0,o.Lk)("i",{class:(0,i.C4)("male"===e.gender?"bx bx-male-sign table-gender-male":"bx bx-female-sign table-gender-female")},null,2)]),(0,o.Lk)("td",Vt,[(0,o.Lk)("i",{class:(0,i.C4)(e.vip?"bx bx-check":"bx bx-x")},null,2)]),(0,o.Lk)("td",null,[(0,o.Lk)("div",Tt,[(0,o.Lk)("button",{class:"delete-contact-button",onClick:t=>c.deleteContact(e._id)},Nt,8,It),(0,o.Lk)("button",{class:"view-contact-button",onClick:t=>c.viewContact(e._id)},Ut,8,Ot),(0,o.Lk)("button",{class:"click-to-call-button",onClick:t=>c.clickToCall(e.phone_number)},$t,8,Rt)])])])))),128))])])}var Bt={props:{titles:{type:Array,required:!0},data:{type:Array,required:!0}},setup(){const e=(0,ne.dj)();return{toast:e}},data(){return{deletedIds:[],StringeeSoftPhone:null}},computed:{filterData(){return this.data.filter((e=>!this.deletedIds.includes(e._id)))}},methods:{async deleteContact(e){try{const t=await M.deleteContact(e);this.toast.success(oe.DELETE_CONTACT,ae),this.deletedIds.push(t.deletedData._id)}catch(t){if(401!==t.status||"Unauthorized"!==t.message)return this.toast.error(t.message,ae);this.$router.push({name:"LoginPage"}),localStorage.clear()}},viewContact(e){this.$router.push({name:"ContactDetailPage",params:{contactId:e}})},clickToCall(e){if(window.StringeeSoftPhone){const t=JSON.parse(localStorage.getItem("stringee_number_select"));if(!t)return this.toast.warning(se.SELECT_NUMBER,ae);this.StringeeSoftPhone=window.StringeeSoftPhone,this.StringeeSoftPhone.config({showMode:"full"}),this.StringeeSoftPhone.makeCall(t.number,e,(function(e){console.log("Make call result",e)}))}else this.toast.success(se.NOT_FOUND_STRINGEE_SOFTPHONE,ae)}}};const Wt=(0,x.A)(Bt,[["render",Xt]]);var Gt=Wt,Jt={name:"ContactPage",components:{LayoutComponent:Ze,ContactDataTable:Gt},data(){return{isAuthenticated:!1,dataTableTitles:["Name","Email","Phone","Gender","VIP","Action"],dataTableContact:[],searchBy:"phone",searchInputValue:"",searchGenderValue:"male",searchVipValue:"true",showSearchInputField:!0,showSearchGenderField:!1,showSearchVipField:!1}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated||this.$router.push({name:"LoginPage"})},mounted(){this.searchContactResult()},methods:{addContact(){this.$router.push({name:"ContactDetailPage",params:{contactId:"add-contact"}})},showSearchInput(){this.showSearchInputField="phone"===this.searchBy||"email"===this.searchBy,this.showSearchGenderField="gender"===this.searchBy,this.showSearchVipField="vip"===this.searchBy},searchContact(){switch(this.searchBy){case"phone":this.searchByPhone();break;case"email":this.searchByEmail();break;case"gender":this.searchByGender();break;case"vip":this.searchByVip();break;default:break}},searchByPhone(){if(this.searchInputValue){const e=this.searchInputValue.replace(/^0/,"84");this.searchContactResult("?phone_number="+e)}else this.searchContactResult()},searchByEmail(){this.searchInputValue?this.searchContactResult("?email="+this.searchInputValue):this.searchContactResult()},searchByGender(){this.searchContactResult("?gender="+this.searchGenderValue)},searchByVip(){const e="true"===this.searchVipValue;this.searchContactResult("?vip="+e)},async searchContactResult(e){try{const t=await M.getList(e);this.dataTableContact=[...t.contactList]}catch(t){if(401!==t.status||"Unauthorized"!==t.message)return console.log(t);this.$router.push({name:"LoginPage"}),localStorage.clear()}}}};const jt=(0,x.A)(Jt,[["render",xt]]);var qt=jt;const Ht={class:"background"};function Qt(e,t,a,s,n,i){const c=(0,o.g2)("LayoutComponent");return(0,o.uX)(),(0,o.CE)("div",Ht,[(0,o.bF)(c)])}var zt={name:"StringeeDemoPage",components:{LayoutComponent:Ze},data(){return{isAuthenticated:!1}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated||this.$router.push({name:"LoginPage"})},methods:{}};const Kt=(0,x.A)(zt,[["render",Qt]]);var Yt=Kt;const Zt={class:"background"},ea=(0,o.Lk)("div",{class:"user-info-page"},[(0,o.Lk)("div",{class:"user-info-area"}),(0,o.Lk)("div",{class:"stringee-info-area"})],-1);function ta(e,t,a,s,n,i){const c=(0,o.g2)("LayoutComponent");return(0,o.uX)(),(0,o.CE)("div",Zt,[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[ea])),_:1})])}var aa={name:"UserPage",components:{LayoutComponent:Ze},data(){return{isAuthenticated:!1}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated||this.$router.push({name:"LoginPage"})}};const sa=(0,x.A)(aa,[["render",ta]]);var oa=sa;const na={class:"notfound-page"};function ia(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",na)}var ca={name:"NotFoundPage"};const ra=(0,x.A)(ca,[["render",ia]]);var la=ra;const da={class:"background"},ua={class:"stringee-iframe"},ha={class:"iframe-wrapper"},pa={class:"header-field"},ma={class:"contactid-field"},ga=(0,o.Lk)("i",{class:"bx bxs-id-card"},null,-1),ba={class:"body-field"},ka=(0,o.Lk)("p",null,"Name",-1),wa=["disabled"],va={class:"body-field"},La=(0,o.Lk)("p",null,"Gender",-1),fa={class:"gender-field"},Ca=["disabled"],ya=(0,o.Lk)("label",{for:"male"},"Male",-1),Pa=["disabled"],xa=(0,o.Lk)("label",{for:"female"},"Female",-1),Sa={class:"body-field"},Aa=(0,o.Lk)("p",null,"Phone number",-1),Ea=["disabled"],_a={class:"body-field"},Va=(0,o.Lk)("p",null,"Email",-1),Ta=["disabled"],Ia={class:"body-field"},Da=(0,o.Lk)("p",null,"Address",-1),Na=["disabled"],Oa={class:"body-field"},Ma=(0,o.Lk)("p",null,"Company",-1),Ua=["disabled"],Ra={class:"body-field"},Fa=(0,o.Lk)("p",null,"VIP",-1),$a={class:"checkbox-wrapper-10"},Xa=["disabled"],Ba=(0,o.Lk)("label",{class:"tgl-btn","data-tg-off":"No","data-tg-on":"Yes",for:"cb5"},null,-1),Wa={key:0,class:"button-field"};function Ga(e,t,a,n,c,r){return(0,o.uX)(),(0,o.CE)("div",da,[(0,o.Lk)("div",ua,[(0,o.Lk)("div",ha,[(0,o.Lk)("div",pa,[(0,o.Lk)("div",ma,[ga,(0,o.Lk)("p",null,(0,i.v_)(c.contact._id),1)]),c.isViewMode?((0,o.uX)(),(0,o.CE)("i",{key:0,class:(0,i.C4)(c.isExistedContact?"bx bxs-edit":"bx bx-plus-circle"),onClick:t[0]||(t[0]=(...e)=>r.enableEditMode&&r.enableEditMode(...e))},null,2)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ba,[ka,(0,o.bo)((0,o.Lk)("input",{type:"text",maxlength:"100","onUpdate:modelValue":t[1]||(t[1]=e=>c.contact.name=e),disabled:c.isViewMode},null,8,wa),[[s.Jo,c.contact.name]])]),(0,o.Lk)("div",va,[La,(0,o.Lk)("div",fa,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"male",value:"male","onUpdate:modelValue":t[2]||(t[2]=e=>c.contact.gender=e),disabled:c.isViewMode},null,8,Ca),[[s.XL,c.contact.gender]]),ya,(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"female",value:"female","onUpdate:modelValue":t[3]||(t[3]=e=>c.contact.gender=e),disabled:c.isViewMode},null,8,Pa),[[s.XL,c.contact.gender]]),xa])]),(0,o.Lk)("div",Sa,[Aa,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>c.contact.phone_number=e),disabled:c.isViewMode,onKeypress:t[5]||(t[5]=(...e)=>r.validateInputPhone&&r.validateInputPhone(...e)),maxlength:"20"},null,40,Ea),[[s.Jo,c.contact.phone_number]])]),(0,o.Lk)("div",_a,[Va,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>c.contact.email=e),disabled:c.isViewMode,maxlength:"100"},null,8,Ta),[[s.Jo,c.contact.email]])]),(0,o.Lk)("div",Ia,[Da,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>c.contact.address=e),disabled:c.isViewMode,maxlength:"100"},null,8,Na),[[s.Jo,c.contact.address]])]),(0,o.Lk)("div",Oa,[Ma,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>c.contact.company=e),disabled:c.isViewMode,maxlength:"100"},null,8,Ua),[[s.Jo,c.contact.company]])]),(0,o.Lk)("div",Ra,[Fa,(0,o.Lk)("div",$a,[(0,o.bo)((0,o.Lk)("input",{class:"tgl tgl-flip",id:"cb5",type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>c.contact.vip=e),disabled:c.isViewMode},null,8,Xa),[[s.lH,c.contact.vip]]),Ba])]),c.isViewMode?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Wa,[(0,o.Lk)("button",{class:"create-update-btn",onClick:t[10]||(t[10]=(...e)=>r.performAction&&r.performAction(...e))},(0,i.v_)(c.isExistedContact?" Update":"Create"),1),(0,o.Lk)("button",{class:"cancel-btn",onClick:t[11]||(t[11]=(...e)=>r.enableViewMode&&r.enableViewMode(...e))},"Cancel")]))])])])}const Ja={_id:"",name:"",phone_number:"",email:"",address:"",company:"",gender:"male",vip:!1};var ja={name:"StringeeIframe",setup(){const e=(0,ne.dj)();return{toast:e}},data(){return{isAuthenticated:!1,isExistedContact:!1,contactResponse:{},contact:{},isViewMode:!0,contactPhone:""}},async created(){try{if(this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated){const e=this.$route.query;switch(e?.call_type){case"1":this.contactPhone=e?.to_number;break;case"2":this.contactPhone=e?.from_number;break;default:break}switch(e?.callDirection){case"outbound":this.contactPhone=e?.calleeNumber.replace(/^0/,"84");break;case"inbound":this.contactPhone=e?.callerNumber.replace(/^0/,"84");break;default:break}e?.customerNumber&&(this.contactPhone=e?.customerNumber.replace(/^0/,"84"))}else this.$router.push({name:"LoginPage"})}catch(e){console.log(e),this.$router.push({name:"LoginPage"})}},async mounted(){try{const e=await M.getContactByPhoneNumber(this.contactPhone);e&&e?.contactList[0]?(this.contactResponse=e?.contactList[0],this.contact={...this.contactResponse},this.isExistedContact=!0):(this.isExistedContact=!1,this.contact={...Ja},this.contact.phone_number=this.contactPhone)}catch(e){if(401!==e.status||"Unauthorized"!==e.message)return this.toast.error(e.message,ae);this.$router.push({name:"LoginPage"}),localStorage.clear()}},methods:{enableEditMode(){this.isViewMode=!1},enableViewMode(){this.isExistedContact?this.contact={...this.contactResponse}:this.contact={...Ja},this.isViewMode=!0},async updateContact(){try{const e=await M.updateContact(this.contact._id,{name:this.contact.name,phone_number:this.contact.phone_number,email:this.contact.email,gender:this.contact.gender,company:this.contact.company,vip:this.contact.vip,address:this.contact.address});e&&e.updatedContact&&(this.toast.success(oe.UPDATE_CONTACT,ae),this.contactResponse=e.updatedContact,this.contact={...this.contactResponse},this.isViewMode=!0)}catch(e){401===e.status&&"Unauthorized"===e.message?(this.$router.push({name:"LoginPage"}),localStorage.clear()):this.toast.error(e.message,ae)}},async createContact(){try{const e=await M.createContact({name:this.contact.name,phone_number:this.contact.phone_number,email:this.contact.email,gender:this.contact.gender,company:this.contact.company,vip:this.contact.vip,address:this.contact.address});e&&e.newContact&&(this.toast.success(oe.CREATE_CONTACT,ae),this.contactResponse=e.newContact,this.contact={...this.contactResponse},this.isViewMode=!0,this.isExistedContact=!0)}catch(e){401===e.status&&"Unauthorized"===e.message?(this.$router.push({name:"LoginPage"}),localStorage.clear()):this.toast.error(e.message,ae)}},performAction(){this.isExistedContact?this.updateContact():this.createContact()},validateInputPhone(e){const t=/[0-9]/;t.test(e.key)||e.preventDefault()}}};const qa=(0,x.A)(ja,[["render",Ga]]);var Ha=qa;const Qa={class:"background"},za={class:"contact-detail-page"},Ka={class:"contact-detail-wrapper"},Ya={class:"contact-detail-header"},Za={key:2,class:"bx bxs-id-card"},es={class:"contact-detail-body"},ts=(0,o.Lk)("p",null,"Name",-1),as=["disabled"],ss={class:"contact-detail-body"},os=(0,o.Lk)("p",null,"Gender",-1),ns={class:"gender-field"},is=["disabled"],cs=(0,o.Lk)("label",{for:"male"},"Male",-1),rs=["disabled"],ls=(0,o.Lk)("label",{for:"female"},"Female",-1),ds={class:"contact-detail-body"},us=(0,o.Lk)("p",null,"Phone number",-1),hs=["disabled"],ps={class:"contact-detail-body"},ms=(0,o.Lk)("p",null,"Email",-1),gs=["disabled"],bs={class:"contact-detail-body"},ks=(0,o.Lk)("p",null,"Address",-1),ws=["disabled"],vs={class:"contact-detail-body"},Ls=(0,o.Lk)("p",null,"Company",-1),fs=["disabled"],Cs={class:"contact-detail-body"},ys=(0,o.Lk)("p",null,"VIP",-1),Ps={class:"checkbox-wrapper-10"},xs=["disabled"],Ss=(0,o.Lk)("label",{class:"tgl-btn","data-tg-off":"No","data-tg-on":"Yes",for:"cb5"},null,-1),As={key:0,class:"contact-detail-button"};function Es(e,t,a,n,c,r){const l=(0,o.g2)("LayoutComponent");return(0,o.uX)(),(0,o.CE)("div",Qa,[(0,o.bF)(l,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",za,[(0,o.Lk)("div",Ka,[(0,o.Lk)("div",Ya,[(0,o.Lk)("i",{class:"bx bx-arrow-back",onClick:t[0]||(t[0]=(...e)=>r.backToContactPage&&r.backToContactPage(...e))}),c.isViewMode?((0,o.uX)(),(0,o.CE)("i",{key:0,class:"bx bxs-edit",onClick:t[1]||(t[1]=(...e)=>r.enableEditMode&&r.enableEditMode(...e))})):(0,o.Q3)("",!0),c.isCreateNewContact?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("i",{key:1,class:"bx bxs-x-circle",onClick:t[2]||(t[2]=(...e)=>r.deleteContact&&r.deleteContact(...e))})),c.isCreateNewContact?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("i",Za)),(0,o.Lk)("p",null,(0,i.v_)(c.contactDetail._id),1)]),(0,o.Lk)("div",es,[ts,(0,o.bo)((0,o.Lk)("input",{type:"text",maxlength:"100","onUpdate:modelValue":t[3]||(t[3]=e=>c.contactDetail.name=e),disabled:c.isViewMode},null,8,as),[[s.Jo,c.contactDetail.name]])]),(0,o.Lk)("div",ss,[os,(0,o.Lk)("div",ns,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"male",value:"male","onUpdate:modelValue":t[4]||(t[4]=e=>c.contactDetail.gender=e),disabled:c.isViewMode},null,8,is),[[s.XL,c.contactDetail.gender]]),cs,(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"female",value:"female","onUpdate:modelValue":t[5]||(t[5]=e=>c.contactDetail.gender=e),disabled:c.isViewMode},null,8,rs),[[s.XL,c.contactDetail.gender]]),ls])]),(0,o.Lk)("div",ds,[us,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>c.contactDetail.phone_number=e),disabled:c.isViewMode,onKeypress:t[7]||(t[7]=(...e)=>r.validateInputPhone&&r.validateInputPhone(...e)),maxlength:"20"},null,40,hs),[[s.Jo,c.contactDetail.phone_number]])]),(0,o.Lk)("div",ps,[ms,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>c.contactDetail.email=e),disabled:c.isViewMode,maxlength:"100"},null,8,gs),[[s.Jo,c.contactDetail.email]])]),(0,o.Lk)("div",bs,[ks,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>c.contactDetail.address=e),disabled:c.isViewMode,maxlength:"100"},null,8,ws),[[s.Jo,c.contactDetail.address]])]),(0,o.Lk)("div",vs,[Ls,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>c.contactDetail.company=e),disabled:c.isViewMode,maxlength:"100"},null,8,fs),[[s.Jo,c.contactDetail.company]])]),(0,o.Lk)("div",Cs,[ys,(0,o.Lk)("div",Ps,[(0,o.bo)((0,o.Lk)("input",{class:"tgl tgl-flip",id:"cb5",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>c.contactDetail.vip=e),disabled:c.isViewMode},null,8,xs),[[s.lH,c.contactDetail.vip]]),Ss])]),c.isViewMode?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",As,[(0,o.Lk)("button",{class:"create-update-btn",onClick:t[12]||(t[12]=(...e)=>r.performAction&&r.performAction(...e))},(0,i.v_)(c.isCreateNewContact?"Create":"Update"),1),(0,o.Lk)("button",{class:"cancel-btn",onClick:t[13]||(t[13]=(...e)=>r.enableViewMode&&r.enableViewMode(...e))},"Cancel")]))])])])),_:1})])}const _s={_id:"",name:"",phone_number:"",email:"",address:"",company:"",gender:"male",vip:!1};var Vs={name:"ContactDetailPage",components:{LayoutComponent:Ze},props:["contactId"],setup(){const e=(0,ne.dj)();return{toast:e}},data(){return{isAuthenticated:!1,isViewMode:!0,isCreateNewContact:!1,contactResponse:{},contactDetail:{}}},created(){this.isAuthenticated=localStorage.getItem("isAuthenticated"),this.isAuthenticated||this.$router.push({name:"LoginPage"})},async mounted(){try{if("add-contact"===this.contactId)this.isViewMode=!1,this.isCreateNewContact=!0,this.contactDetail={..._s};else{const e=await M.getContact(this.contactId);this.contactResponse=e.contact,this.contactDetail={...this.contactResponse}}}catch(e){if(401!==e.status||"Unauthorized"!==e.message)return this.toast.error(e.message,ae);this.$router.push({name:"LoginPage"}),localStorage.clear()}},methods:{backToContactPage(){this.$router.push({name:"ContactPage"})},enableEditMode(){this.isViewMode=!1},enableViewMode(){this.isCreateNewContact?(this.contactDetail={..._s},this.$router.push({name:"ContactPage"})):(this.contactDetail={...this.contactResponse},this.isViewMode=!0)},performAction(){this.isCreateNewContact?this.createContact():this.updateContact()},async createContact(){try{const e=await M.createContact({name:this.contactDetail.name,phone_number:this.contactDetail.phone_number,email:this.contactDetail.email,gender:this.contactDetail.gender,company:this.contactDetail.company,vip:this.contactDetail.vip,address:this.contactDetail.address});e&&e.newContact&&(this.toast.success(oe.CREATE_CONTACT,ae),this.contactResponse=e.newContact,this.contactDetail={...this.contactResponse},this.isViewMode=!0,this.isCreateNewContact=!1)}catch(e){401===e.status&&"Unauthorized"===e.message?(this.$router.push({name:"LoginPage"}),localStorage.clear()):this.toast.error(e.message,ae)}},async updateContact(){try{const e=await M.updateContact(this.contactDetail._id,{name:this.contactDetail.name,phone_number:this.contactDetail.phone_number,email:this.contactDetail.email,gender:this.contactDetail.gender,company:this.contactDetail.company,vip:this.contactDetail.vip,address:this.contactDetail.address});e&&e.updatedContact&&(this.toast.success(oe.UPDATE_CONTACT,ae),this.contactResponse=e.updatedContact,this.contactDetail={...this.contactResponse},this.isViewMode=!0)}catch(e){401===e.status&&"Unauthorized"===e.message?(this.$router.push({name:"LoginPage"}),localStorage.clear()):this.toast.error(e.message,ae)}},async deleteContact(){try{const e=await M.deleteContact(this.contactDetail._id);e&&e.deletedData&&(this.toast.success(oe.DELETE_CONTACT,ae),this.$router.push({name:"ContactPage"}))}catch(e){401===e.status&&"Unauthorized"===e.message?(this.$router.push({name:"LoginPage"}),localStorage.clear()):this.toast.error(e.message,ae)}},validateInputPhone(e){const t=/[0-9]/;t.test(e.key)||e.preventDefault()}}};const Ts=(0,x.A)(Vs,[["render",Es]]);var Is=Ts;const Ds=[{name:"LoginPage",path:"/login",component:re},{name:"SignupPage",path:"/signup",component:Ee},{name:"RecoverPasswordPage",path:"/recover-password",component:Ge},{name:"HomePage",path:"/",component:at},{name:"ContactPage",path:"/contact",component:qt},{name:"ContactDetailPage",path:"/contact/:contactId",component:Is,props:!0},{name:"StringeeDemoPage",path:"/stringee-demo",component:Yt},{name:"UserPage",path:"/user",component:oa},{name:"StringeeIframe",path:"/stringee-iframe",component:Ha},{name:"NotFoundPage",path:"/:pathMatch(.*)*",component:la}],Ns=(0,y.aE)({history:(0,y.LA)(),routes:Ds});var Os=Ns;a(7917);const Ms=(0,s.Ef)(G);Ms.use(Os),Ms.use(ne.Ay,{transition:"Vue-Toastification__bounce",maxToasts:20,newestOnTop:!0}),Ms.mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var c=!0,r=0;r<s.length;r++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(c=!1,n<i&&(i=n));if(c){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,i=s[0],c=s[1],r=s[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(r)var d=r(a)}for(t&&t(s);l<i.length;l++)n=i[l],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self["webpackChunkcontact_center_vuejs"]=self["webpackChunkcontact_center_vuejs"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(5284)}));s=a.O(s)})();
//# sourceMappingURL=app.55e17f9f.js.map